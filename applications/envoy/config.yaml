apiVersion: gateway.envoyproxy.io/v1alpha1
kind: EnvoyProxy
metadata:
  name: envoy-proxy-config
  namespace: envoy-gateway-system
spec:
  mergeGateways: true
  provider:
    type: "Kubernetes"
    kubernetes:
      envoyDaemonSet:
        patch:
          value:
            metadata:
              annotations:
                argocd.argoproj.io/tracking-id: envoy-gateway:apps/DaemonSet:envoy-gateway-system/envoy-gateway-proxy
            spec:
              template:
                metadata:
                  annotations:
                    argocd.argoproj.io/tracking-id: envoy-gateway:apps/Pod:envoy-gateway-system/envoy-gateway-proxy
                spec:
                  nodeSelector:
                    inf-k8s.net/proxy: "true"
